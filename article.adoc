= Apache ActiveMQ Message Cursors

Apache ActiveMQ provides an implementation of the JMS provider.

image::./assets/images/AMQ-Cursors-HighLevel.png[alt=AMQ-Cursors-HighLevel,width=480,height=640,align="center"]

Producer clients can publish messages to a destination on a broker, on which Consumer clients can subscribe to consume those messages on said destination.

To improve scalability ActiveMQ implements per destination strategies to handle message consumption patterns, via "Message Cursors".

== What are Message Cursors?

Message Cursors are a mechanism to allow differing consumer patterns to not easily exceed Broker memory.

image::./assets/images/AMQ-Cursors-HighLevelCursors.png[alt=AMQ-Cursors-HighLevelCursors,width=480,height=640,align="center"]

Each destination on a broker has its own cursor instance, these instances work as in-memory message reference caches.

image::./assets/images/AMQ-Cursors-GenericCursor.png[alt=AMQ-Cursors-GenericCursor,width=480,height=640,align="center"]

These message caches feed Dispatch queues, which in turn provide messages to the consumer client.

=== Types of Message Cursors

Store-based cursors are used by default to handle persistent messages.

VM cursors are very fast, but cannot handle slow message consumers.

File-based cursors are used by default to handle non-persistent messages. They are useful when the message store is slow and message consumers are relatively fast.

==== Store Cursor

image::./assets/images/AMQ-Cursors-Fast-Store.png[alt=AMQ-Cursors-Fast-Store,width=480,height=640,align="center"]


image::./assets/images/AMQ-Cursors-Slow-Store.png[alt=AMQ-Cursors-Slow-Store,width=480,height=640,align="center"]


==== VM Cursor

image::./assets/images/AMQ-Cursors-VM.png[alt=AMQ-Cursors-VM,width=480,height=640,align="center"]


==== File Based Cursor

image::./assets/images/AMQ-Cursors-FileBased.png[alt=AMQ-Cursors-FileBased,width=480,height=640,align="center"]


== Conclusion
